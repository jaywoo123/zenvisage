branches:
  only:
  - v3.0

language: node_js
node_js:
  - "8"
dist: trusty
services:
  - postgresql
  - docker
before_install:
   - export DISPLAY=:99.0
   - sh -e /etc/init.d/xvfb start
   - sleep 3 # give xvfb some time to start
   - npm install -g protractor
   - webdriver-manager update

addons:
  chrome: stable

before_script:
   - cd docker
   - docker-compose up &
   - cd ..
script: sh travis_docker.sh

