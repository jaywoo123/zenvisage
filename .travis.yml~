branches:
  only:
  - master

language: node_js
node_js:
  - "8"
dist: trusty
services:
  - postgresql
sudo: required
before_install:
   - export DISPLAY=:99.0
   - sh -e /etc/init.d/xvfb start
   - sleep 3 # give xvfb some time to start
   - npm install -g protractor
   - webdriver-manager update

addons:
  chrome: stable

before_script:
   - psql -c "ALTER USER postgres WITH PASSWORD 'zenvisage';" -U postgres 
   - psql -c "ALTER USER postgres WITH SUPERUSER;" -U postgres

script: sh build.sh